<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"	
 	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="event">
	<select id="eventList" resultType="ignis.bean.ig_event">
		select eb_num, eb_title, eb_content, eb_regdate, eb_readcount 
		from (select rownum rnum, eb_num, eb_title, eb_content, eb_regdate, eb_readcount
			from(select eb_num, eb_title, eb_content, eb_regdate, eb_readcount from ig_event
				order by eb_regdate desc )) where rnum between #{begin} and #{end}
	</select>
	<select id="selectNum" resultType="ignis.bean.ig_event">
		select * from ig_event
		where eb_num = #{eb_num}
	</select>
	<insert id="insertEvent" parameterType="ignis.bean.ig_event">
		insert into ig_event
		values(eb_num.NEXTVAL, #{eb_title}, #{eb_content}, 0, SYSDATE)
	</insert>
	<update id="updateEvent" parameterType="java.util.HashMap">
		update ig_event 
		set eb_title = #{eb_title}, eb_content = #{eb_content} 
		where eb_num = #{eb_num}
	</update>
	<delete id="deleteEvent" parameterType="java.util.HashMap">
		delete from ig_event
		where eb_num = #{eb_num}
	</delete>
	<select id="selectListCount" resultType="int">
		SELECT count(*) FROM ig_event
	</select>
	<update id="upReadCount" parameterType="int">
		update ig_event set eb_readcount = eb_readcount + 1
		where eb_num = #{eb_num}
	</update>
</mapper>
